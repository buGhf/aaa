<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>System App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- –ë–ê–ó–ê –ò –¶–í–ï–¢–ê (PORSCHE DARK GREEN & GOLD) --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        :root {
            /* –ë–ê–ó–ê: –ì–ª—É–±–æ–∫–∏–π —Ç–µ–º–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π (–ø–æ—á—Ç–∏ —á–µ—Ä–Ω—ã–π) */
            --bg-color: #06140b; 
            --card-bg: rgba(255, 255, 255, 0.03);
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
            
            /* –ê–ö–¶–ï–ù–¢: –ë–ª–∞–≥–æ—Ä–æ–¥–Ω–æ–µ –∑–æ–ª–æ—Ç–æ */
            --accent-color: #fbbf24;
            --accent-glow: rgba(251, 191, 36, 0.4);
            --accent-gradient: linear-gradient(135deg, #fbbf24 0%, #d97706 100%);
            
            --life-gradient: linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%);
            --success-gradient: linear-gradient(135deg, #10b981 0%, #059669 100%);
            
            --separator: rgba(255, 255, 255, 0.08);
            --success: #10b981;
            --danger: #ef4444;
        }

        /* --- –ó–ï–†–ù–ò–°–¢–û–°–¢–¨ (FILM GRAIN) --- */
        body {
            background-color: var(--bg-color); color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            margin: 0; padding: 0; padding-bottom: 100px; padding-top: 50px;
            overflow-x: hidden; -webkit-font-smoothing: antialiased;
            position: relative;
        }
        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none; z-index: -1; opacity: 0.4;
        }

        /* --- –¢–ò–ü–û–ì–†–ê–§–ò–ö–ê --- */
        h1, h2, .greeting, .victory-title, .ob-title, .card-title { letter-spacing: -0.03em; }

        /* --- PRELOADER --- */
        #preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-color); z-index: 9999; display: flex; align-items: center; justify-content: center; transition: opacity 0.5s ease, visibility 0.5s; }
        .loader-icon { font-size: 60px; animation: pulse 1.5s infinite; filter: drop-shadow(0 0 20px var(--accent-glow)); }

        /* --- –ê–ù–ò–ú–ê–¶–ò–ò --- */
        .card, .nav-item, .main-btn, .toggle-btn, .task-add-btn, .battle-reset, .vision-card, .menu-item { transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s; cursor: pointer; }
        .card:active, .main-btn:active, .vision-card:active { transform: scale(0.97); }
        
        /* --- HEADER --- */
        .header { position: fixed; top: 0; left: 0; width: 100%; height: 50px; background: rgba(6, 20, 11, 0.85); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-bottom: 1px solid var(--separator); display: flex; align-items: center; justify-content: center; z-index: 900; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
        .header.visible { opacity: 1; pointer-events: auto; }
        .header h1 { font-size: 16px; font-weight: 700; margin: 0; text-transform: uppercase; letter-spacing: 0.05em; color: var(--accent-color); }

        .tab-content { display: none; padding: 20px 16px; animation: slideUp 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .tab-content.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        /* --- ONBOARDING --- */
        .onboarding-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-color); z-index: 5000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; transition: opacity 0.5s ease; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E"); }
        .onboarding-overlay.hidden { opacity: 0; pointer-events: none; }
        .slide { display: none; animation: fadeIn 0.5s; flex-direction: column; align-items: center; height: 100%; justify-content: center; }
        .slide.active { display: flex; }
        .ob-icon { font-size: 80px; margin-bottom: 30px; filter: drop-shadow(0 0 40px var(--accent-glow)); }
        .ob-title { font-size: 36px; font-weight: 900; margin-bottom: 15px; line-height: 1; text-transform: uppercase; }
        .ob-text { font-size: 16px; color: var(--text-secondary); line-height: 1.5; margin-bottom: 40px; max-width: 300px; font-weight: 500; }
        .ob-dots { display: flex; gap: 8px; margin-bottom: 30px; }
        .dot { width: 8px; height: 8px; background: rgba(255,255,255,0.2); border-radius: 50%; transition: all 0.3s; }
        .dot.active { background: var(--accent-color); width: 24px; border-radius: 4px; box-shadow: 0 0 10px var(--accent-glow); }

        /* --- –ì–õ–ê–í–ù–ê–Ø --- */
        .hero-section { padding: 15px 0 25px; text-align: center; }
        .user-avatar-large { width: 80px; height: 80px; border-radius: 50%; background: #222; margin: 0 auto 15px; object-fit: cover; border: 2px solid var(--accent-color); box-shadow: 0 0 30px var(--accent-glow); }
        .greeting { font-size: 32px; font-weight: 900; margin-bottom: 5px; text-transform: uppercase; }
        .sub-greeting { color: var(--text-secondary); font-size: 14px; font-weight: 500; letter-spacing: 0.02em; text-transform: uppercase; }

        /* --- –ö–ê–†–¢–û–ß–ö–ò --- */
        .time-card, .battle-card, .progress-card, .quote-card, .menu-list {
            background: var(--card-bg); border-radius: 16px; padding: 20px;
            margin: 20px 0; border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .battle-card.all-done { border-color: var(--accent-color); box-shadow: 0 0 20px var(--accent-glow); }
        
        .time-header-row { display: flex; justify-content: space-between; align-items: center; }
        .date-display { font-size: 18px; font-weight: 700; color: #fff; }
        .toggle-btn { background: rgba(255,255,255,0.05); width: 36px; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .time-body { margin-top: 24px; opacity: 1; max-height: 200px; overflow: hidden; transition: all 0.4s; }
        .time-card.collapsed .time-body { margin-top: 0; opacity: 0; max-height: 0; }
        .time-card.collapsed .toggle-icon { transform: rotate(180deg); }
        .time-row { margin-bottom: 18px; }
        .time-label { display: flex; justify-content: space-between; font-size: 12px; font-weight: 700; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 8px; letter-spacing: 0.05em; }
        .time-track { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden; }
        .time-fill { height: 100%; border-radius: 3px; background: var(--life-gradient); transition: width 1s linear; }

        .battle-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .battle-title { font-size: 18px; font-weight: 800; display: flex; align-items: center; gap: 10px; letter-spacing: -0.02em; }
        .battle-reset { font-size: 11px; color: #000; font-weight: 700; cursor: pointer; padding: 6px 12px; background: var(--accent-color); border-radius: 6px; text-transform: uppercase; }
        .task-input-row { display: flex; gap: 10px; margin-bottom: 20px; }
        .task-input { flex: 1; background: rgba(0,0,0,0.5); border: 1px solid var(--separator); color: #fff; padding: 12px 16px; border-radius: 10px; font-size: 16px; outline: none; font-family: 'Inter', sans-serif; }
        .task-input:focus { border-color: var(--accent-color); }
        .task-add-btn { width: 48px; background: var(--accent-gradient); color: #000; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; font-weight: 700; }
        .task-list { display: flex; flex-direction: column; gap: 12px; }
        .task-item { display: flex; align-items: center; justify-content: space-between; padding: 14px; background: rgba(255,255,255,0.03); border-radius: 10px; transition: opacity 0.2s; border: 1px solid transparent; }
        .task-item.completed { opacity: 0.5; }
        .task-item.completed .task-text { text-decoration: line-through; color: var(--text-secondary); }
        .task-left { display: flex; align-items: center; gap: 14px; flex: 1; }
        .custom-checkbox { width: 24px; height: 24px; border-radius: 6px; border: 2px solid var(--separator); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; }
        .task-item.completed .custom-checkbox { background: var(--accent-color); border-color: var(--accent-color); }
        .custom-checkbox::after { content: '‚úì'; color: #000; font-size: 14px; font-weight: 900; display: none; }
        .task-item.completed .custom-checkbox::after { display: block; }
        .task-text { font-size: 15px; font-weight: 600; }
        .task-del { color: var(--text-secondary); padding: 8px; cursor: pointer; font-size: 20px; }
        .battle-progress { height: 4px; background: rgba(255,255,255,0.05); border-radius: 2px; margin-top: 20px; overflow: hidden; }
        .battle-fill { height: 100%; background: var(--accent-color); width: 0%; transition: width 0.4s; box-shadow: 0 0 10px var(--accent-glow); }

        /* --- VISION BOARD --- */
        .vision-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        .vision-card { aspect-ratio: 1 / 1; background: var(--card-bg); border-radius: 12px; position: relative; overflow: hidden; border: 1px solid var(--separator); display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .vision-card.filled { border-color: rgba(255,255,255,0.2); }
        .vision-card.filled::before { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 50%); z-index: 1; }
        .vision-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 0; transition: transform 0.5s; filter: contrast(1.1) saturate(1.1); }
        .vision-card:active .vision-img { transform: scale(1.05); }
        .vision-title { position: relative; z-index: 2; font-size: 12px; font-weight: 800; padding: 10px; color: #fff; width: 100%; margin-top: auto; text-shadow: 0 2px 4px rgba(0,0,0,0.8); text-transform: uppercase; letter-spacing: 0.05em; }
        .vision-card.empty .vision-title { margin-top: 10px; color: var(--text-secondary); text-shadow: none; }
        .vision-icon { font-size: 30px; color: #444; }
        .vision-plus { font-size: 40px; color: var(--accent-color); text-shadow: 0 0 15px var(--accent-glow); }
        .vision-delete { position: absolute; top: 8px; right: 8px; z-index: 10; background: rgba(0,0,0,0.7); width: 26px; height: 26px; border-radius: 50%; color: var(--danger); display: flex; align-items: center; justify-content: center; font-size: 14px; backdrop-filter: blur(4px); border: 1px solid rgba(255,255,255,0.1); }

        /* --- VICTORY OVERLAY --- */
        .victory-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(6, 20, 11, 0.95); z-index: 3000; display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.5s; backdrop-filter: blur(10px); }
        .victory-overlay.show { opacity: 1; pointer-events: auto; }
        .trophy-anim { font-size: 100px; margin-bottom: 20px; animation: bounce 1.5s infinite alternate; filter: drop-shadow(0 0 60px var(--accent-glow)); }
        @keyframes bounce { from { transform: scale(1); } to { transform: scale(1.1); } }
        .victory-title { font-size: 36px; font-weight: 900; color: #fff; margin-bottom: 10px; text-transform: uppercase; letter-spacing: -0.03em; }
        .victory-sub { font-size: 18px; color: var(--accent-color); font-weight: 700; margin-bottom: 40px; text-transform: uppercase; letter-spacing: 0.1em; }
        .share-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 16px 32px; border-radius: 40px; color: #fff; font-weight: 700; cursor: pointer; display: flex; align-items: center; gap: 10px; font-size: 16px; transition: background 0.2s; text-transform: uppercase; letter-spacing: 0.05em; }
        .share-btn:active { background: rgba(255,255,255,0.2); }

        /* --- QUOTE & PROGRESS --- */
        .progress-header { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); }
        .progress-track { width: 100%; height: 8px; background: rgba(255,255,255,0.05); border-radius: 4px; overflow: hidden; }
        .progress-fill { width: 0%; height: 100%; background: var(--accent-gradient); border-radius: 4px; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 0 10px var(--accent-glow); }

        .quote-icon { font-size: 50px; color: var(--accent-color); opacity: 0.3; position: absolute; top: -5px; left: 10px; font-family: serif; }
        .quote-text { font-size: 18px; font-weight: 600; font-style: italic; line-height: 1.4; position: relative; z-index: 2; margin-bottom: 16px; color: #e5e7eb; }
        .quote-author { font-size: 12px; color: var(--accent-color); font-weight: 800; text-align: right; display: block; position: relative; z-index: 2; text-transform: uppercase; letter-spacing: 0.1em; text-shadow: 0 0 10px var(--accent-glow); }

        .main-btn { display: block; width: 100%; padding: 18px; background: var(--accent-gradient); color: #000; text-align: center; border-radius: 12px; font-size: 16px; font-weight: 800; text-decoration: none; box-shadow: 0 10px 30px -5px var(--accent-glow); border: none; text-transform: uppercase; letter-spacing: 0.05em; }

        /* --- CONTENT CARDS --- */
        .section-header { font-size: 20px; font-weight: 900; margin: 35px 0 20px; color: #fff; padding-left: 10px; border-left: 4px solid var(--accent-color); line-height: 1; text-transform: uppercase; letter-spacing: 0.05em; }
        .card { background: linear-gradient(180deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%); border-radius: 16px; overflow: hidden; margin-bottom: 24px; position: relative; border: 1px solid var(--separator); }
        .card.done { border-color: var(--success); } 
        .card.done::after { content: '‚úì'; position: absolute; top: 12px; right: 12px; background: var(--success); color: #000; font-weight: 800; font-size: 12px; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 5; box-shadow: 0 0 10px rgba(16, 185, 129, 0.4); }
        .card-body { padding: 20px; }
        .card-title { font-size: 18px; font-weight: 800; margin-bottom: 8px; line-height: 1.2; letter-spacing: -0.02em; }
        .badge { display: inline-block; padding: 4px 8px; background: rgba(251, 191, 36, 0.1); color: var(--accent-color); border-radius: 6px; font-size: 10px; font-weight: 800; text-transform: uppercase; margin-bottom: 10px; letter-spacing: 0.1em; border: 1px solid rgba(251, 191, 36, 0.2); }
        .video-facade { position: relative; padding-bottom: 56.25%; height: 0; background-color: #000; cursor: pointer; }
        .video-cover-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.8; filter: grayscale(30%); transition: filter 0.3s; }
        .card:hover .video-cover-img { filter: grayscale(0%); }
        .play-button { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(5px); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(255,255,255,0.3); }
        .play-button::after { content: ''; width: 0; height: 0; border-left: 18px solid #fff; border-top: 10px solid transparent; border-bottom: 10px solid transparent; margin-left: 4px; }

        audio { width: 100%; height: 40px; margin-top: 5px; opacity: 0.9; filter: invert(1) hue-rotate(180deg); }
        details { background: rgba(255,255,255,0.03); border-radius: 12px; border: 1px solid var(--separator); }
        summary { padding: 16px; cursor: pointer; font-weight: 700; color: var(--accent-color); list-style: none; display: flex; justify-content: space-between; align-items: center; text-transform: uppercase; font-size: 14px; letter-spacing: 0.05em; }
        summary::after { content: '+'; font-size: 20px; font-weight: 300; color: #fff; }
        details[open] summary::after { content: '-'; }
        .text-content { padding: 20px; font-size: 16px; line-height: 1.7; color: #d1d1d6; border-top: 1px solid var(--separator); white-space: pre-wrap; font-weight: 400; }
        .text-content b { color: #fff; font-weight: 800; }
        .highlight { color: var(--accent-color); font-weight: 700; }

        /* --- PROFILE --- */
        .profile-header { display: flex; align-items: center; margin-bottom: 35px; }
        .profile-avatar { width: 80px; height: 80px; border-radius: 50%; background: #222; margin-right: 20px; object-fit: cover; border: 2px solid var(--accent-color); box-shadow: 0 0 20px var(--accent-glow); }
        .profile-info h2 { margin: 0; font-size: 24px; font-weight: 900; text-transform: uppercase; letter-spacing: -0.02em; }
        .profile-info p { margin: 5px 0 0 0; color: var(--accent-color); font-size: 14px; font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; }
        .menu-list { padding: 0; }
        .menu-item { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--separator); cursor: pointer; font-size: 16px; text-decoration: none; color: #fff; font-weight: 600; }
        .menu-item span:first-child { display: flex; align-items: center; gap: 10px; }

        /* --- MODAL FIX --- */
        .modal { display: none !important; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(6, 20, 11, 0.95); z-index: 9999; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
        .modal.open { display: flex !important; animation: fadeIn 0.3s; }
        .modal-content { background: #06140b; border-radius: 20px; padding: 30px; width: 100%; max-width: 400px; border: 1px solid var(--accent-color); position: relative; box-shadow: 0 0 40px var(--accent-glow); }
        .modal-close { position: absolute; top: 20px; right: 20px; font-size: 28px; color: #fff; cursor: pointer; line-height: 1; }

        /* --- BOTTOM NAV (GOLD NEON) --- */
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 85px; background: rgba(6, 20, 11, 0.9); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); border-top: 1px solid var(--separator); display: flex; justify-content: space-between; padding: 10px 10px; z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: flex-start; color: #666; font-size: 10px; font-weight: 600; width: 20%; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); padding-top: 8px; position: relative; }
        .nav-item svg { width: 24px; height: 24px; margin-bottom: 6px; fill: currentColor; transition: all 0.3s; }
        .nav-item.active { color: var(--accent-color); transform: translateY(-5px); }
        .nav-item.active svg { fill: var(--accent-color); filter: drop-shadow(0 0 8px var(--accent-glow)); }
        .nav-item.active::after { content: ''; position: absolute; bottom: 5px; width: 4px; height: 4px; background: var(--accent-color); border-radius: 50%; box-shadow: 0 0 10px var(--accent-color); animation: fadeIn 0.3s; }

        .ai-placeholder { text-align: center; padding: 80px 20px; }
        .ai-icon { font-size: 80px; margin-bottom: 30px; display: inline-block; animation: float 3s ease-in-out infinite; filter: drop-shadow(0 0 20px var(--accent-glow)); }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="preloader"><div class="loader-icon">üè¥</div></div>

    <div id="onboarding" class="onboarding-overlay hidden">
        <div class="slide active" id="slide-1">
            <div class="ob-icon">üè¥</div>
            <div class="ob-title">–î–û–ë–†–û<br>–ü–û–ñ–ê–õ–û–í–ê–¢–¨</div>
            <div class="ob-text">–ó–¥–µ—Å—å –Ω–µ—Ç –º–µ—Å—Ç–∞ —Ç–µ–æ—Ä–∏–∏. –ú—ã –¥–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —á—Ç–æ–±—ã —Ç—ã –≤–∑—è–ª –æ—Ç –∂–∏–∑–Ω–∏ —Å–≤–æ—ë.</div>
            <div class="ob-dots"><div class="dot active"></div><div class="dot"></div><div class="dot"></div></div>
            <a href="#" onclick="nextSlide(2)" class="main-btn" style="width: 80%;">–ü–æ–Ω—è–ª</a>
        </div>
        <div class="slide" id="slide-2">
            <div class="ob-icon">‚è≥</div>
            <div class="ob-title">–í–†–ï–ú–ï–ù–ò –ù–ï–¢</div>
            <div class="ob-text">–¢–∞–π–º–µ—Ä –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –ø–æ–∫–∞–∂–µ—Ç, —Å–∫–æ–ª—å–∫–æ –≥–æ–¥–∞ —É–∂–µ —Å–æ–∂–∂–µ–Ω–æ. –≠—Ç–æ –ø—Ä–∞–≤–¥–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å.</div>
            <div class="ob-dots"><div class="dot"></div><div class="dot active"></div><div class="dot"></div></div>
            <a href="#" onclick="nextSlide(3)" class="main-btn" style="width: 80%;">–î–∞–ª–µ–µ</a>
        </div>
        <div class="slide" id="slide-3">
            <div class="ob-icon">üéØ</div>
            <div class="ob-title">–î–ï–ô–°–¢–í–£–ô</div>
            <div class="ob-text">–ó–∞–ø–æ–ª–Ω–∏ —Ü–µ–ª–∏. –ó–∞–∫—Ä—ã–≤–∞–π –∑–∞–¥–∞—á–∏ –ø—Ä—è–º–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç —É–∂–µ –≤ –∫–æ–Ω—Ü–µ –¥–Ω—è.</div>
            <div class="ob-dots"><div class="dot"></div><div class="dot"></div><div class="dot active"></div></div>
            <a href="#" onclick="finishOnboarding()" class="main-btn" style="width: 80%;">–í–û–ô–¢–ò</a>
        </div>
    </div>

    <div id="victory-modal" class="victory-overlay">
        <div class="trophy-anim">üèÜ</div>
        <div class="victory-title">–î–ï–ù–¨ –í–ó–Ø–¢</div>
        <div class="victory-sub">–¢–´ –ú–ê–®–ò–ù–ê</div>
        <div class="share-btn" onclick="shareVictory()">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="#fff"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.66 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>
            –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
        </div>
    </div>

    <div class="header" id="main-header"><h1 id="header-title">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</h1></div>

    <div id="tab-home" class="tab-content active">
        <div class="hero-section">
            <img src="" id="home-avatar" class="user-avatar-large" onerror="this.src='https://cdn-icons-png.flaticon.com/512/847/847969.png'">
            <div class="greeting">–ü–†–ò–í–ï–¢, <span id="username">–ß–ï–ú–ü–ò–û–ù</span></div>
            <div class="sub-greeting">–ù–∞—á–Ω–∏ –∑–∞–±–∏—Ä–∞—Ç—å —Å–≤–æ—ë —Å–µ–≥–æ–¥–Ω—è.</div>
        </div>
        <div class="time-card" id="time-widget">
            <div class="time-header-row">
                <div class="date-display" id="current-date">...</div>
                <div class="toggle-btn" onclick="toggleTimeWidget()"><span class="toggle-icon">‚ñº</span></div>
            </div>
            <div class="time-body">
                <div class="time-row"><div class="time-label"><span>–ì–æ–¥ —Å–æ–∂–∂–µ–Ω –Ω–∞:</span><span id="year-percent" style="font-weight:700; color: var(--accent-color)">0%</span></div><div class="time-track"><div class="time-fill" id="year-bar" style="width: 0%"></div></div></div>
                <div class="time-row" style="margin-bottom:0;"><div class="time-label"><span>–î–µ–Ω—å –ø—Ä–æ—à–µ–ª –Ω–∞:</span><span id="day-percent" style="font-weight:700; color: var(--accent-color)">0%</span></div><div class="time-track"><div class="time-fill" id="day-bar" style="width: 0%"></div></div></div>
            </div>
        </div>
        <div class="battle-card" id="battle-card">
            <div class="battle-header"><div class="battle-title">üéØ –ë–û–ï–í–û–ô –ü–õ–ê–ù</div><div class="battle-reset" onclick="resetTasks()">–ù–û–í–´–ô –î–ï–ù–¨</div></div>
            <div class="task-input-row"><input type="text" id="task-input" class="task-input" placeholder="–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å..."><div class="task-add-btn" onclick="addTask()">+</div></div>
            <div class="task-list" id="task-list"></div>
            <div class="battle-progress"><div class="battle-fill" id="battle-bar"></div></div>
        </div>
        <div class="progress-card"><div class="progress-header"><span id="level-title">–£—Ä–æ–≤–µ–Ω—å: –ù–æ–≤–∏—á–æ–∫</span><span id="progress-percent" style="color: var(--accent-color)">0%</span></div><div class="progress-track"><div class="progress-fill" id="progress-bar"></div></div></div>
        <div class="quote-card"><div class="quote-icon">‚Äú</div><div class="quote-text" id="quote-text">...</div><span class="quote-author" id="quote-author"></span></div>
    </div>

    <div id="tab-library" class="tab-content">
        <div class="section-header">–°–ò–°–¢–ï–ú–ê</div>
        <div class="card" id="item-video1"><div class="video-facade" onclick="playContent('video1', this, 'Ja2VgG4I9KA')"><img src="cover1.jpg" class="video-cover-img"><div class="play-button"></div></div><div class="card-body"><span class="badge">–°—Ç–∞—Ä—Ç</span><div class="card-title">–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –Ω–∞—á–∞—Ç—å</div><div class="card-desc">–•–≤–∞—Ç–∏—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å. –ü—Ä–æ—Å—Ç–∞—è —Å—Ö–µ–º–∞ –∑–∞–ø—É—Å–∫–∞.</div></div></div>
        <div class="card" id="item-video2"><div class="video-facade" onclick="playContent('video2', this, 'NDYvxYSFbvA')"><img src="cover2.jpg" class="video-cover-img"><div class="play-button"></div></div><div class="card-body"><span class="badge">–ë–∞–∑–∞</span><div class="card-title">–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –ø–æ-–Ω–æ–≤–æ–º—É</div></div></div>
        <div class="card" id="item-video3"><div class="video-facade" onclick="playContent('video3', this, 'sq9P1fyzLnk')"><img src="cover3.jpg" class="video-cover-img"><div class="play-button"></div></div><div class="card-body"><span class="badge">–ú–æ—Ç–∏–≤–∞—Ü–∏—è</span><div class="card-title">–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div></div></div>
        <div class="card" id="item-video4"><div class="video-facade" onclick="playContent('video4', this, 'ayd3ULvow3k')"><img src="cover4.jpg" class="video-cover-img"><div class="play-button"></div></div><div class="card-body"><span class="badge">–û—à–∏–±–∫–∏</span><div class="card-title">–†–∞–±–æ—Ç–∞ –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</div></div></div>
        <div class="section-header">–ú–´–®–õ–ï–ù–ò–ï</div>
        <div class="card" id="item-video5"><div class="video-facade" onclick="playContent('video5', this, 'n9s_4jvxR0M')"><img src="cover5.jpg" class="video-cover-img"><div class="play-button"></div></div><div class="card-body"><span class="badge">–§–æ–∫—É—Å</span><div class="card-title">–¢–∏—à–∏–Ω–∞ –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è</div></div></div>
        <div class="card" id="item-video6"><div class="video-facade" onclick="playContent('video6', this, 'odtCZ2fsRRk')"><img src="cover6.jpg" class="video-cover-img"><div class="play-button"></div></div><div class="card-body"><span class="badge">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</span><div class="card-title">–í—ã–≥–æ—Ä–∞–Ω–∏–µ: –≤—ã—Ö–æ–¥ –µ—Å—Ç—å</div></div></div>
        <div class="card" id="item-audio1"><div class="card-body"><span class="badge">–ê—É–¥–∏–æ</span><div class="card-title">üéô –û–∫—Ä—É–∂–µ–Ω–∏–µ</div><audio controls onplay="trackProgress('audio1')"><source src="https://dl.dropboxusercontent.com/scl/fi/m3z94htt3v3ttu3z7agsr/voice1.mp3?rlkey=her5gtxpmpjfprzdyndhaxnk3" type="audio/mpeg"></audio></div></div>
        <div class="card" id="item-audio2"><div class="card-body"><span class="badge">–ê—É–¥–∏–æ</span><div class="card-title">üéô –û—Ç–¥—ã—Ö</div><audio controls onplay="trackProgress('audio2')"><source src="https://dl.dropboxusercontent.com/scl/fi/1rgpu09you9nmkq1eke9s/voice2.mp3?rlkey=p8z9xs4wq3ba7jsk6fqszg4o6" type="audio/mpeg"></audio></div></div>
        <div class="section-header">–ì–ê–ô–î–´</div>
        <div class="card" id="item-text1"><div class="card-body"><span class="badge">–°—Ç—Ä–∞—Ç–µ–≥–∏—è</span><div class="card-title">–ù–µ —Å–ª–∏–≤–∞–π —ç–Ω–µ—Ä–≥–∏—é</div><details ontoggle="if(this.open) trackProgress('text1')"><summary>–ß–∏—Ç–∞—Ç—å</summary><div class="text-content">
–ü—Ä–µ–¥—Å—Ç–∞–≤—å —Å–∏—Ç—É–∞—Ü–∏—é:<br><br>
<ul><li>–¢—ã –ø—Ä–∏–µ—Ö–∞–ª –Ω–∞ –∑–∞–ø—Ä–∞–≤–∫—É, –æ–ø–ª–∞—Ç–∏–ª –µ–µ –∏ 90% —Ç–æ–ø–ª–∏–≤–∞ —Ç—ã —Å–ª–∏–≤–∞–µ—à—å –Ω–∞ –∞—Å—Ñ–∞–ª—å—Ç, –Ω–µ –≤ –±–∞–∫.</li></ul>
<i>–ß—É–≤—Å—Ç–≤—É–µ—à—å? –ù–µ –ø—Ä–∏—è—Ç–Ω–æ, —Ç—ã –≤–µ–¥—å –∑–∞–ø–ª–∞—Ç–∏–ª - –∞  –ø–æ–ª—É—á–∏–ª–æ—Å—å —á—Ç–æ –∑—Ä—è.</i><br><br>
<b>–¢–∞–∫ –≤–æ—Ç —Ç—ã –º–∞—à–∏–Ω–∞.</b> –í –Ω–∞—á–∞–ª–µ –¥–Ω—è —Ç—ã –ø–æ–ª–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏, –Ω–æ —Ç—Ä–∞—Ç–∏—à—å –µ–µ –Ω–µ –Ω–∞ —Ç–µ –≤–µ—â–∏.<br>
–¢—ã —Å–∫—Ä–æ–ª–∏—à—å –ª–µ–Ω—Ç—É, –¥—Ä()—á–∏—à—å, –≤—ã–ø–∏–≤–∞–µ—à—å –∏ –¥—É–º–∞–µ—à—å:<br><br>
<i>- –û–∫–µ–π, 4 —á–∞—Å–∞ –¥–Ω—è. –ï—â–µ –≤—Ä–µ–º—è –µ—Å—Ç—å. –°—è–¥—É –∑–∞ —Ä–∞–±–æ—Ç—É –∫ 5.</i><br>
–ü–æ—Ç–æ–º –≤ 5 —Ç—ã —Ä–µ—à–∏–ª –ø–æ–∑–≤–æ–Ω–∏—Ç—å –∫–µ–Ω—Ç–∞–º, —Ä–∞–∑–≥–æ–≤–æ—Ä –∑–∞—Ç—è–Ω—É–ª—Å—è –∏ –≤—ã—Ö–æ–¥–∏—Ç —á—Ç–æ —É–∂–µ 7 —á–∞—Å–æ–≤.<br><br>
–ö–∞–∫ —Ç–∞–∫? –Ø –∂–µ –Ω–µ –¥–∞–≤–Ω–æ, –≤—Ä–æ–¥–µ –±—ã, –≤—Å—Ç–∞–ª —Å –∫—Ä–æ–≤–∞—Ç–∏. –¢—ã –∑–∞—Å—Ç–∞–≤–ª—è–µ—à—å —Å–µ–±—è —Å–µ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ —Ñ–æ–∫—É—Å–∞ —É–∂–µ –Ω–µ—Ç. –î–µ–ª–∞–µ—à—å –±–∞–∑–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ —Ä–∞–±–æ—Ç–µ, –º–æ–∂–µ—Ç –¥–∞–∂–µ –Ω–µ –≤—Å–µ. –ê –º–æ–∂–µ—Ç –≤–æ–æ–±—â–µ —Å–æ–∑–¥–∞–µ—à—å –≤–∏–¥–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã, –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã ‚Äú–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ‚Äù –∑–∞—Å—Ç–∞–≤–∏—Ç—å –Ω–µ –≤–∏–Ω–∏—Ç—å —Å–µ–±—è.<br><br>
<span class="highlight">–ö–∞–∫–æ–π –≤—ã–≤–æ–¥?</span><br>
<ul>
    <li>20% –∑–∞–±—Ä–∞–ª —Ç–∏–∫ —Ç–æ–∫</li>
    <li>30% –∑–∞–±—Ä–∞–ª–æ –ø–æ?–Ω–æ</li>
    <li>30% —Ç—ã –æ—Ç–¥–∞–ª –Ω–∞ –ø—É—Å—Ç–æ–π —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –¥—Ä—É–∑—å—è–º–∏</li>
    <li>10% –∑–∞–±—Ä–∞–ª–∏ —Ä—É—Ç–∏–Ω–Ω—ã–µ –¥–µ–ª–∞</li>
    <li><b>10% –æ—Å—Ç–∞–ª–æ—Å—å</b></li>
</ul>
<br>
+ –Ω–µ –∑–∞–∫—Ä—ã—Ç—ã–π –¥–µ–Ω—å<br>
+ –Ω–µ —Å–¥–≤–∏–≥ —Å –º–µ—Å—Ç–∞<br>
+ –ø–ª–∞–Ω –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –Ω–∞ –∑–∞–≤—Ç—Ä–∞<br>
+ –º–Ω–æ–≥–æ –≤—Å—è–∫–æ–π –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–π –∑–∞–ª—É–ø—ã, –∫–æ—Ç–æ—Ä—É—é –ø–µ—Ä–µ—á–∏—Å–ª—è—è –±—ã—Å—Ç—Ä–µ–µ –∑–∞–≥–æ–Ω–∏—à—å —Å–µ–±—è –≤ –¥–µ–ø—Ä–µ—Å—Å–∏—é<br><br>
–¢—ã –¥—É–º–∞–µ—à—å, —á—Ç–æ —è –æ–ø–∏—Å–∞–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –Ω–µ—É–¥–∞—á–Ω–∏–∫–∞ - –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ –ø—Ä–∏–≤–æ–¥—è—Ç —á—Ç–æ–±—ã –∑–∞–ø—É–≥–∞—Ç—å –≤–∞—Å. –ù–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤—Å–µ —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.<br><br>
–ù–∏–∫—Ç–æ –Ω–µ —Å—á–∏—Ç–∞–µ—Ç —Å–µ–±—è —Ç–∞–∫–∏–º, –Ω–æ –ø–æ—á–µ–º—É —Ç–æ –≤ –∫–æ–Ω—Ü–µ –¥–Ω—è –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç –∑–ª–æ—Å—Ç—å –Ω–∞ —Å–µ–±—è –∏ —á—É–≤—Å—Ç–≤–æ —Å–ª–∞–±–æ—Å—Ç–∏.<br><br>
–£ –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–∏ –æ—Ç–≤–ª–µ—á–µ–Ω–∏—è, —Å—É—Ç—å –≤ —Ç–æ–º —á—Ç–æ –æ–Ω–∏  –µ—Å—Ç—å. –°–æ–±–ª–∞–∑–Ω—ã —É –∫–∞–∂–¥–æ–≥–æ - —Å—É—Ç—å –≤ —Ç–æ–º, —á—Ç–æ–±—ã –∏—Ö —Å–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å<br><br>
<b>- –ö–∞–∫?</b><br>
–ù–µ —É–±–∏—Ä–∞—Ç—å –∏—Ö –Ω–∞–≤—Å–µ–≥–¥–∞, –∞ –≤—Ä–µ–º–µ–Ω–Ω–æ. –ü–æ–∫–∞ —Ç—ã –Ω–µ —Å–¥–µ–ª–∞–µ—à—å —Ç–æ —Ç–æ —Ç–æ —Ç–æ‚Ä¶<br><br>
–ù–µ –ø–æ–∫—É—Ä–∏—à—å —Å–∏–≥–∞—Ä–µ—Ç—É, –ø–æ–∫–∞ –Ω–µ –∑–∞–∫—Ä–æ–µ—à—å —Å–¥–µ–ª–∫—É<br>
–ù–µ –ø–æ—Å–º–æ—Ç—Ä–∏—à—å —Ñ–∏–ª—å–º, –ø–æ–∫–∞ –Ω–µ –∑–∞–∫—Ä–æ–µ—à—å –¥–Ω–µ–≤–Ω–æ–π –ø–ª–∞–Ω<br>
–∏ —Ç–¥<br><br>
–ò–ª–∏ —Ü–µ–ª—å: –ö—É–ø–∏—Ç—å –º–æ—Ç–æ—Ü–∏–∫–ª<br><br>
<i>‚Äù—è –Ω–µ –±—É–¥—É —Å–∫–∞—á–∏–≤–∞—Ç—å —Ç–∏–∫ —Ç–æ–∫, –∏–Ω—Å—Ç—É (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã) –ø–æ–∫–∞ –Ω–µ –∫—É–ø–ª—é –º–æ—Ç–æ—Ü–∏–∫‚Äù</i><br><br>
<b>–°–¥–µ–ª–∞–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å—Ç–∏–º—É–ª–æ–º.</b>
        </div></details></div></div>
        <div class="card" id="item-text2"><div class="card-body"><span class="badge">–°–≤—è–∑–∏</span><div class="card-title">–ö–∞–∫ –æ–±–∑–∞–≤–µ—Å—Ç–∏—Å—å —Å–≤—è–∑—è–º–∏</div><details ontoggle="if(this.open) trackProgress('text2')"><summary>–ß–∏—Ç–∞—Ç—å</summary><div class="text-content">
–¢—É—Ç —Ç–æ–Ω–∫–∞—è –≥—Ä–∞–Ω—å –º–µ–∂–¥—É –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –æ–±—â–µ–Ω–∏–µ–º, –≥–¥–µ —è —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª —á—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –Ω–∞–≤—è–∑—ã–≤–∞—Ç—å—Å—è –∏ –∏—Å–∫–∞—Ç—å —Ü–µ–ª–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ.<br><br>
–¢—É—Ç –º—ã –≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–≤—è–∑–µ–π —Å —É–∂–µ —É—Å–ø–µ—à–Ω—ã–º–∏ –ª—é–¥—å–º–∏ –≤ –≤–∞—à–µ–π –Ω–∏—à–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–ø—ã—Ç–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.<br>
<b>–í–∑–∞–∏–º–æ–≤—ã–≥–æ–¥–∞.</b><br><br>
–í—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —á–µ–ª–æ–≤–µ–∫—É —á—Ç–æ —Ç–æ —Ü–µ–Ω–Ω–æ–µ, —á—Ç–æ–±—ã –æ–Ω —Ç–æ–∂–µ –ø–æ–ª—É—á–∏–ª —Ö–æ—Ç—å –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–æ –∏–º–ø–∞–∫—Ç. –í–µ–¥—å –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–≤–æ–Ω–∏—Ç—å—Å—è/–≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è/—Å–ø–∏—Å–∞—Ç—å—Å—è —Å —á–µ–ª–æ–≤–µ–∫–æ–º –≤—ã—à–µ –≤–∞—Å –ø–æ —Ä–∞–Ω–≥—É, –≤–∞–º –Ω—É–∂–Ω–æ –µ–≥–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å<br><br>
<span class="highlight">- –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å?</span><br><br>
–í–∞–∂–Ω–æ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å "—á–µ–º —è –º–æ–≥—É –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω" ,–∞ —Å—Ä–∞–∑—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ:<br>
<b>–ü—Ä–∏–º–µ—Ä:</b><br><br>
–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –≤ –∏–Ω—Å—Ç–µ/—Ç–≥ –º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–µ–∫–ª–∞–º—É —Å–µ—Ä–≤–∏—Å–∞, –±–∏–∑–Ω–µ—Å–∞ –≤ –∑–∞–º–µ–Ω —Ä–∞–∑–≥–æ–≤–æ—Ä–∞<br>
–í–æ—Ç –∏ –ø—Ä–µ–ª–µ—Å—Ç—å –º–µ–¥–∏–π–∫–∏, —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±<br><br>
–í –¥—Ä—É–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –Ω—É–∂–Ω–æ –æ—Ç—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è –æ—Ç –≤–∞—à–µ–≥–æ –Ω–∞–≤—ã–∫–∞ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç —É–ª—É—á—à–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞ —á–µ–ª–æ–≤–µ–∫–∞, —Å –∫–æ—Ç–æ—Ä—ã–º —Ö–æ—Ç–∏—Ç–µ –ø–æ–æ–±—â–∞—Ç—å—Å—è –∏–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å —á—Ç–æ —Ç–æ.<br><br>
–°—É—Ç—å –≤ —Ç–æ–º, —á—Ç–æ–±—ã –Ω–µ –¥–∞–≤–∞—Ç—å –æ—â—É—â–µ–Ω–∏–µ "–±–µ—Å–ø–ª–∞—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã" —á–µ–ª–æ–≤–µ–∫—É<br><br>
<b>–®–∞–±–ª–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è:</b><br>
<i>¬´–ò–≤–∞–Ω, –¥–æ–±—Ä—ã–π –¥–µ–Ω—å! –Ø —Å–µ–π—á–∞—Å –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç –∏ —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –≤–æ–ø—Ä–æ—Å–æ–º [–≤–æ–ø—Ä–æ—Å]. –í–∞—à –æ–ø—ã—Ç –º–Ω–µ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–µ–Ω<br>
–ü–æ–Ω–∏–º–∞—é —Ü–µ–Ω–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –ø–æ—ç—Ç–æ–º—É –ø—Ä–µ–¥–ª–∞–≥–∞—é —Å–¥–µ–ª–∞—Ç—å —Ä–µ–∫–ª–∞–º–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤–∞—à–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ –º–æ–µ–º –∏–Ω—Å—Ç–∞–≥—Ä–∞–º–º–µ (10–∫ –ª–æ—è–ª—å–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –æ—Ö–≤–∞—Ç—ã –≤ —Å—Ç–æ—Ä–∏—Å [—Ü–∏—Ñ—Ä–∞]). –£–≤–µ—Ä–µ–Ω, –≤–∞—à–µ–º—É –±–∏–∑–Ω–µ—Å—É –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–µ–Ω —ç—Ç–æ—Ç –ø—Ä–∏—Ç–æ–∫ –ª–∏–¥–æ–≤.<br>
–ù–∞–π–¥–µ—Ç—Å—è –ø–æ–ª —á–∞—Å–∞  –¥–ª—è –∫–æ—Ä–æ—Ç–∫–æ–≥–æ —Å–æ–∑–≤–æ–Ω–∞/–æ–±—â–µ–Ω–∏—è)¬ª</i>
        </div></details></div></div>
    </div>

    <div id="tab-vision" class="tab-content">
        <div class="hero-section"><div class="greeting">–¢–í–û–Å –í–ò–î–ï–ù–ò–ï</div><div class="sub-greeting">–ó–∞–≥—Ä—É–∂–∞–π —Å–≤–æ–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã.</div></div>
        <div class="vision-grid" id="vision-grid"></div>
    </div>

    <div id="tab-ai" class="tab-content">
        <div class="ai-placeholder">
            <div class="ai-icon">üß†</div><h2 style="margin-top:0; font-weight:800; text-transform:uppercase;">AI –ú–µ–Ω—Ç–æ—Ä</h2><p style="color:#8e8e93; font-size:15px; line-height:1.5;">–Ø –ø–æ–¥–∫–ª—é—á–∞—é –Ω–µ–π—Ä–æ—Å–µ—Ç—å, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω–µ—Ç —Ç–≤–æ–∏–º –ª–∏—á–Ω—ã–º –∫–æ—É—á–µ–º.<br>–û–Ω–∞ –Ω–µ –±—É–¥–µ—Ç —Ç–µ–±—è –∂–∞–ª–µ—Ç—å. –û–Ω–∞ –±—É–¥–µ—Ç –¥–∞–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p><div style="margin-top: 30px; padding: 15px; border: 1px dashed #444; border-radius: 12px; color: #666; font-size: 13px;">–°—Ç–∞—Ç—É—Å: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤...</div>
        </div>
    </div>

    <div id="tab-profile" class="tab-content">
        <div class="profile-header"><img src="" id="profile-avatar" class="profile-avatar" onerror="this.src='https://cdn-icons-png.flaticon.com/512/847/847969.png'"><div class="profile-info"><h2 id="profile-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h2><p>–£—á–∞—Å—Ç–Ω–∏–∫ –∫–ª—É–±–∞</p></div></div>
        <div class="menu-list">
            <a href="https://t.me/Ivannote" class="menu-item" style="color: var(--accent-color)"><span>üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ / –í–æ–ø—Ä–æ—Å</span><span class="arrow">‚ûî</span></a>
            <div class="menu-item" onclick="openModal()"><span>‚ÑπÔ∏è –û —Å—É—Ç–∏ (–ú–∞–Ω–∏—Ñ–µ—Å—Ç)</span><span class="arrow">–ß–∏—Ç–∞—Ç—å</span></div>
            <div class="menu-item" onclick="resetProgress()"><span style="color: var(--danger)">üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ (–°–±—Ä–æ—Å)</span><span class="arrow">‚ü≥</span></div>
        </div>
        <div style="text-align: center; margin-top: 30px; color: #666; font-size: 12px; text-transform: uppercase; letter-spacing: 0.1em; font-weight: 700;">–í–µ—Ä—Å–∏—è 19.0 (Gold Standard)</div>
    </div>

    <div class="modal" id="about-modal">
        <div class="modal-content">
            <div class="modal-close" onclick="closeModal()">√ó</div>
            <h2 style="margin-top:0; font-weight:900; text-transform:uppercase; color: var(--accent-color);">–û —Å—É—Ç–∏</h2>
            <div style="line-height:1.6; color: #d1d1d6; font-size: 15px;">
                –¢—ã –∑–¥–µ—Å—å –Ω–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É—á–∏—Ç—å—Å—è. <br><b>–¢—ã –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å.</b><br><br>
                –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî —Ç–≤–æ–π –ª–∏—á–Ω—ã–π —á–∏—Ç-–∫–æ–¥ –∫ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏. –ú—ã —É–±—Ä–∞–ª–∏ –≤—Å—ë –ª–∏—à–Ω–µ–µ, —á—Ç–æ–±—ã —Ç—ã —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∏–ª –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º:<br><br>
                ‚Ä¢ <b style="color:#fff">–Ø—Å–Ω—ã–π —É–º</b> ‚Äî –∫–æ–≥–¥–∞ –¥—Ä—É–≥–∏–µ –ø–∞–Ω–∏–∫—É—é—Ç.<br>
                ‚Ä¢ <b style="color:#fff">–≠–Ω–µ—Ä–≥–∏—è</b> ‚Äî –∫–æ–≥–¥–∞ –¥—Ä—É–≥–∏–µ –≤—ã–≥–æ—Ä–∞—é—Ç.<br>
                ‚Ä¢ <b style="color:#fff">–í–ª–∏—è–Ω–∏–µ</b> ‚Äî –∫–æ–≥–¥–∞ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Å—è—Ç.<br><br>
                <span class="highlight">–ü—Ä–æ—Å—Ç–æ –∑–∞–±–∏—Ä–∞–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.</span> –†–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ –∑–∞–ª–æ–∂–µ–Ω –≤ –°–∏—Å—Ç–µ–º—É.
            </div>
        </div>
    </div>

    <input type="file" id="vision-file-input" accept="image/*" style="display: none;">

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('tab-home', '', this)"><svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg><span>–ì–õ–ê–í–ù–ê–Ø</span></div>
        <div class="nav-item" id="nav-library" onclick="switchTab('tab-library', '–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π', this)"><svg viewBox="0 0 24 24"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"/></svg><span>–ë–ê–ó–ê</span></div>
        <div class="nav-item" onclick="switchTab('tab-vision', '–¶–µ–ª–∏', this)"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg><span>–¶–ï–õ–ò</span></div>
        <div class="nav-item" onclick="switchTab('tab-ai', 'AI –ú–µ–Ω—Ç–æ—Ä', this)"><svg viewBox="0 0 24 24"><path d="M12 2c1.1 0 2 .9 2 2h4v2h2v14H4V6h2V4h4c0-1.1.9-2 2-2zm0 2c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm6 4H6v12h12V8zm-6 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"/></svg><span>–ú–ï–ù–¢–û–†</span></div>
        <div class="nav-item" onclick="switchTab('tab-profile', '–ü—Ä–æ—Ñ–∏–ª—å', this)"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg><span>–ü–†–û–§–ò–õ–¨</span></div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready(); tg.expand(); tg.setHeaderColor('#06140b'); tg.setBackgroundColor('#06140b');

        // PRELOADER
        window.addEventListener('load', () => { setTimeout(() => { document.getElementById('preloader').style.opacity = '0'; setTimeout(() => document.getElementById('preloader').style.visibility = 'hidden', 500); }, 800); });

        // ONBOARDING
        function checkOnboarding() { if (!localStorage.getItem('onboardingComplete')) document.getElementById('onboarding').classList.remove('hidden'); }
        function nextSlide(n) { document.querySelectorAll('.slide').forEach(s => s.classList.remove('active')); document.getElementById('slide-' + n).classList.add('active'); }
        function finishOnboarding() { localStorage.setItem('onboardingComplete', 'true'); document.getElementById('onboarding').classList.add('hidden'); tg.HapticFeedback.notificationOccurred('success'); }
        checkOnboarding();

        // –¶–ò–¢–ê–¢–´
        const quotes = [{ text: "–°–æ–≤—Å–µ–º –Ω–µ –≤–∞–∂–Ω–æ, –∫–∞–∫ —Ç—ã —É–¥–∞—Ä–∏—à—å, –∞ –∫–∞–∫ –¥–µ—Ä–∂–∏—à—å —É–¥–∞—Ä.", author: "–†–æ–∫–∫–∏ –ë–∞–ª—å–±–æ–∞" }, { text: "–†–∞–±–æ—Ç–∞–π, –ø–æ–∫–∞ —Ç–µ–±–µ –Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è.", author: "–•–∞—Ä–≤–∏ –°–ø–µ–∫—Ç–µ—Ä" }, { text: "–õ–∏—à—å —É—Ç—Ä–∞—Ç–∏–≤ –≤—Å–µ –¥–æ –∫–æ–Ω—Ü–∞, –º—ã –æ–±—Ä–µ—Ç–∞–µ–º —Å–≤–æ–±–æ–¥—É.", author: "–¢–∞–π–ª–µ—Ä –î—ë—Ä–¥–µ–Ω" }, { text: "–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ —Å—Ç–æ–∏—Ç –º–µ–∂–¥—É —Ç–æ–±–æ–π –∏ —Ü–µ–ª—å—é ‚Äî —ç—Ç–æ –±—Ä–µ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã —Å–µ–±–µ –Ω–µ—Å–µ—à—å.", author: "–î–∂–æ—Ä–¥–∞–Ω –ë–µ–ª—Ñ–æ—Ä—Ç" }, { text: "–ï—Å—Ç—å –¥–≤–∞ –≤–∏–¥–∞ –±–æ–ª–∏: –±–æ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è —Å–∏–ª—å–Ω–µ–µ, –∏ –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞—è –±–æ–ª—å.", author: "–§—Ä—ç–Ω–∫ –ê–Ω–¥–µ—Ä–≤—É–¥" }, { text: "–õ–µ–≤ –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è –º–Ω–µ–Ω–∏–µ–º –æ–≤–µ—Ü.", author: "–¢–∞–π–≤–∏–Ω –õ–∞–Ω–Ω–∏—Å—Ç–µ—Ä" }, { text: "–ù–∏–∫–æ–º—É –Ω–µ –ø–æ–∑–≤–æ–ª—è–π –≥–æ–≤–æ—Ä–∏—Ç—å, —á—Ç–æ —Ç—ã —á–µ–≥–æ-—Ç–æ –Ω–µ –º–æ–∂–µ—à—å.", author: "–í –ø–æ–≥–æ–Ω–µ –∑–∞ —Å—á–∞—Å—Ç—å–µ–º" }, { text: "–î–µ–ª–∞–π –∏–ª–∏ –Ω–µ –¥–µ–ª–∞–π. –ù–µ –Ω–∞–¥–æ –ø—ã—Ç–∞—Ç—å—Å—è.", author: "–ô–æ–¥–∞" }, { text: "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–±–µ–∂–∞—Ç—å, —á—Ç–æ–±—ã –Ω–∞—É—á–∏—Ç—å—Å—è —Ö–æ–¥–∏—Ç—å.", author: "–¢–æ–Ω–∏ –°—Ç–∞—Ä–∫" }, { text: "–¢—ã –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å —Ç–æ, —á—Ç–æ —Ö–æ—á–µ—à—å, —Å–≤–æ–∏–º–∏ —Å–∏–ª–∞–º–∏.", author: "–¢–æ–º–∞—Å –®–µ–ª–±–∏" }, { text: "–í–µ–ª–∏–∫–∏–º–∏ –Ω–µ —Ä–æ–∂–¥–∞—é—Ç—Å—è, –≤–µ–ª–∏–∫–∏–º–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è.", author: "–ö—Ä–µ—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü" }, { text: "–ï—Å–ª–∏ —É–º–µ–µ—à—å —á—Ç–æ-—Ç–æ –¥–µ–ª–∞—Ç—å, –Ω–µ –¥–µ–ª–∞–π —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ.", author: "–î–∂–æ–∫–µ—Ä" }, { text: "–°–∞–º—ã–π —Ü–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä, –∫–æ—Ç–æ—Ä—ã–π —è –∑–Ω–∞—é ‚Äî —ç—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.", author: "–ì–æ—Ä–¥–æ–Ω –ì–µ–∫–∫–æ" }, { text: "–ù–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å. –ù–∏—á—Ç–æ –≤ –º–∏—Ä–µ –Ω–µ –∑–∞–º–µ–Ω–∏—Ç –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å.", author: "–†—ç–π –ö—Ä–æ–∫" }, { text: "–Ø –º–æ–≥—É –ª–∏—à—å –ø–æ–∫–∞–∑–∞—Ç—å –¥–≤–µ—Ä—å. –¢—ã —Å–∞–º –¥–æ–ª–∂–µ–Ω –≤–æ–π—Ç–∏.", author: "–ú–æ—Ä—Ñ–µ—É—Å" }, { text: "–Ø –Ω–µ –≥–∞–¥–∞—é. –≠—Ç–æ –¥—É—Ä–Ω–∞—è –ø—Ä–∏–≤—ã—á–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–∞–≥—É–±–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ª–æ–≥–∏–∫—É.", author: "–®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å" }, { text: "–Ø –Ω–µ –≤ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –Ø –∏ –µ—Å—Ç—å –æ–ø–∞—Å–Ω–æ—Å—Ç—å.", author: "–£–æ–ª—Ç–µ—Ä –£–∞–π—Ç" }, { text: "–ù–µ—Ç –≤ –Ω–∞—à–µ–º —è–∑—ã–∫–µ —Å–ª–æ–≤–∞ –≤—Ä–µ–¥–Ω–µ–µ –∏ –æ–ø–∞—Å–Ω–µ–µ, —á–µ–º ¬´–ú–æ–ª–æ–¥–µ—Ü¬ª.", author: "–û–¥–µ—Ä–∂–∏–º–æ—Å—Ç—å" }, { text: "–°—Ç—Ä–∞—Ö —É–±–∏–≤–∞–µ—Ç —Ä–∞–∑—É–º.", author: "–î—é–Ω–∞" }, { text: "–¢–æ, —á—Ç–æ –º—ã –¥–µ–ª–∞–µ–º –≤ –∂–∏–∑–Ω–∏, –æ—Ç–∑—ã–≤–∞–µ—Ç—Å—è –≤ –≤–µ—á–Ω–æ—Å—Ç–∏.", author: "–ì–ª–∞–¥–∏–∞—Ç–æ—Ä" }, { text: "–ü—Ä–æ—à–µ–¥—à–µ–µ ‚Äî –∑–∞–±—ã—Ç–æ. –ë—É–¥—É—â–µ–µ ‚Äî –∑–∞–∫—Ä—ã—Ç–æ. –ù–∞—Å—Ç–æ—è—â–µ–µ ‚Äî –¥–∞—Ä–æ–≤–∞–Ω–æ.", author: "–£–≥–≤—ç–π" }, { text: "–ú–∏—Ä –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–±–µ.", author: "–õ–∏—Ü–æ —Å–æ —à—Ä–∞–º–æ–º" }, { text: "–Ø –±—ã–ª —Å–ª–µ–ø, –Ω–æ —Ç–µ–ø–µ—Ä—å —è –≤–∏–∂—É.", author: "–û–±–ª–∞—Å—Ç–∏ —Ç—å–º—ã" }, { text: "–ù–µ—Ç –Ω–∏—á–µ–≥–æ –±–ª–∞–≥–æ—Ä–æ–¥–Ω–æ–≥–æ –≤ –±–µ–¥–Ω–æ—Å—Ç–∏.", author: "–í–æ–ª–∫ —Å –£–æ–ª–ª-—Å—Ç—Ä–∏—Ç" }, { text: "–ó–∞—á–µ–º –º—ã –ø–∞–¥–∞–µ–º? –ß—Ç–æ–±—ã –Ω–∞—É—á–∏—Ç—å—Å—è –ø–æ–¥–Ω–∏–º–∞—Ç—å—Å—è.", author: "–ë—ç—Ç–º–µ–Ω" }, { text: "–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∑–≤–æ–ª—è–π –Ω–∏–∫–æ–º—É –∑–Ω–∞—Ç—å, –æ —á–µ–º —Ç—ã –¥—É–º–∞–µ—à—å.", author: "–ö—Ä–µ—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü" }, { text: "–ú–∏–ª–ª–∏–æ–Ω –¥–æ–ª–ª–∞—Ä–æ–≤ ‚Äî —ç—Ç–æ –Ω–µ –∫—Ä—É—Ç–æ. –ó–Ω–∞–µ—à—å, —á—Ç–æ –∫—Ä—É—Ç–æ? –ú–∏–ª–ª–∏–∞—Ä–¥.", author: "–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å" }, { text: "–¢—ã ‚Äî —ç—Ç–æ –Ω–µ —Ç–≤–æ—è —Ä–∞–±–æ—Ç–∞. –¢—ã ‚Äî —ç—Ç–æ –Ω–µ —Å–∫–æ–ª—å–∫–æ –¥–µ–Ω–µ–≥ —É —Ç–µ–±—è –≤ –±–∞–Ω–∫–µ.", author: "–ë–æ–π—Ü–æ–≤—Å–∫–∏–π –∫–ª—É–±" }, { text: "–ü–æ–±–µ–¥–∏—Ç–µ–ª–∏ –Ω–µ –æ–ø—Ä–∞–≤–¥—ã–≤–∞—é—Ç—Å—è.", author: "–•–∞—Ä–≤–∏ –°–ø–µ–∫—Ç–µ—Ä" }, { text: "–¢–æ, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –Ω–µ —á–∏–Ω–∏.", author: "–¢–æ–Ω–∏ –°—Ç–∞—Ä–∫" }, { text: "–ö–ª—é—á –∫ —É—Å–ø–µ—Ö—É? –ü—ã–ª—å –≤ –≥–ª–∞–∑–∞? –ù–µ—Ç. –≠—Ç–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞.", author: "–ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä" }];
        const todayQuote = quotes[new Date().getDate() % quotes.length];
        document.getElementById('quote-text').innerText = todayQuote.text; document.getElementById('quote-author').innerText = "‚Äî " + todayQuote.author;

        // –í–†–ï–ú–Ø
        function updateDateAndWidget() {
            const now = new Date(); const options = { day: 'numeric', month: 'long', weekday: 'long' };
            const dateStr = now.toLocaleDateString('ru-RU', options);
            document.getElementById('current-date').innerText = dateStr.charAt(0).toUpperCase() + dateStr.slice(1);
            const startOfYear = new Date(now.getFullYear(), 0, 1); const endOfYear = new Date(now.getFullYear() + 1, 0, 1);
            const yearPercent = ((now - startOfYear) / (endOfYear - startOfYear)) * 100;
            const startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate()); const endOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
            const dayPercent = ((now - startOfDay) / (endOfDay - startOfDay)) * 100;
            document.getElementById('year-bar').style.width = yearPercent + '%'; document.getElementById('year-percent').innerText = yearPercent.toFixed(1) + '%';
            document.getElementById('day-bar').style.width = dayPercent + '%'; document.getElementById('day-percent').innerText = dayPercent.toFixed(1) + '%';
        }
        setInterval(updateDateAndWidget, 1000); updateDateAndWidget();
        function toggleTimeWidget() {
            const widget = document.getElementById('time-widget'); const isCollapsed = widget.classList.toggle('collapsed');
            localStorage.setItem('timeWidgetHidden', isCollapsed); tg.HapticFeedback.selectionChanged();
        }
        if(localStorage.getItem('timeWidgetHidden') === 'true') document.getElementById('time-widget').classList.add('collapsed');

        // BATTLE REPORT
        let tasks = JSON.parse(localStorage.getItem('battleTasks')) || [];
        function renderTasks() {
            const list = document.getElementById('task-list'); list.innerHTML = ''; let completedCount = 0;
            tasks.forEach((task, index) => {
                if (task.done) completedCount++;
                const div = document.createElement('div'); div.className = `task-item ${task.done ? 'completed' : ''}`;
                div.innerHTML = `<div class="task-left" onclick="toggleTask(${index})"><div class="custom-checkbox"></div><div class="task-text">${task.text}</div></div><div class="task-del" onclick="deleteTask(${index})">√ó</div>`;
                list.appendChild(div);
            });
            const percent = tasks.length === 0 ? 0 : (completedCount / tasks.length) * 100;
            document.getElementById('battle-bar').style.width = percent + '%';
            const card = document.getElementById('battle-card');
            if (tasks.length > 0 && percent === 100) card.classList.add('all-done'); else card.classList.remove('all-done');
        }
        function addTask() { const input = document.getElementById('task-input'); const text = input.value.trim(); if (text) { tasks.push({ text: text, done: false }); saveTasks(); input.value = ''; tg.HapticFeedback.impactOccurred('light'); } }
        function toggleTask(index) { const was100 = (tasks.length > 0 && tasks.filter(t => t.done).length === tasks.length); tasks[index].done = !tasks[index].done; saveTasks(); tg.HapticFeedback.selectionChanged(); if (!was100 && (tasks.length > 0 && tasks.filter(t => t.done).length === tasks.length)) showVictory(); }
        function showVictory() { const overlay = document.getElementById('victory-modal'); overlay.classList.add('show'); tg.HapticFeedback.notificationOccurred('success'); setTimeout(() => { overlay.classList.remove('show'); }, 3000); }
        function shareVictory() { const text = "–Ø –∑–∞–∫—Ä—ã–ª –¥–µ–Ω—å –≤ –°–∏—Å—Ç–µ–º–µ. –ê —Ç—ã? @Ivannote"; const url = "https://t.me/share/url?url=" + encodeURIComponent("https://t.me/Ivannote") + "&text=" + encodeURIComponent(text); tg.openTelegramLink(url); }
        function deleteTask(index) { tasks.splice(index, 1); saveTasks(); tg.HapticFeedback.impactOccurred('light'); }
        function resetTasks() { if(confirm('–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –¥–µ–Ω—å?')) { tasks = tasks.filter(t => !t.done); saveTasks(); tg.HapticFeedback.notificationOccurred('success'); } }
        function saveTasks() { localStorage.setItem('battleTasks', JSON.stringify(tasks)); renderTasks(); }
        renderTasks();

        // VISION BOARD
        const defaultGoals = [ { id: 'car', title: '–ú–∞—à–∏–Ω–∞ –º–µ—á—Ç—ã', img: null }, { id: 'house', title: '–ú–æ–π –î–æ–º', img: null }, { id: 'style', title: '–ú–æ–π –°—Ç–∏–ª—å', img: null }, { id: 'watch', title: '–ß–∞—Å—ã / –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã', img: null }, { id: 'country', title: '–°—Ç—Ä–∞–Ω–∞ –¥–ª—è –∂–∏–∑–Ω–∏', img: null } ];
        let goals = JSON.parse(localStorage.getItem('userGoals')) || defaultGoals;
        let activeGoalIndex = -1;
        function renderGoals() {
            const grid = document.getElementById('vision-grid'); grid.innerHTML = '';
            goals.forEach((goal, index) => {
                const div = document.createElement('div'); div.className = `vision-card ${goal.img ? 'filled' : 'empty'}`;
                div.innerHTML = goal.img ? `<img src="${goal.img}" class="vision-img"><div class="vision-title">${goal.title}</div><div class="vision-delete" onclick="event.stopPropagation(); deleteGoalImage(${index})">√ó</div>` : `<div class="vision-icon">üì∑</div><div class="vision-title">${goal.title}</div>`;
                div.onclick = () => triggerUpload(index); grid.appendChild(div);
            });
            const addDiv = document.createElement('div'); addDiv.className = 'vision-card empty'; addDiv.innerHTML = `<div class="vision-plus">+</div><div class="vision-title">–°–≤–æ—è —Ü–µ–ª—å</div>`; addDiv.onclick = addNewGoal; grid.appendChild(addDiv);
        }
        function triggerUpload(index) { activeGoalIndex = index; document.getElementById('vision-file-input').click(); }
        function addNewGoal() { const title = prompt("–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –Ø—Ö—Ç–∞):"); if(title) { goals.push({ id: 'custom-' + Date.now(), title: title, img: null }); saveGoals(); } }
        function deleteGoalImage(index) { if(confirm("–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ —ç—Ç–æ–π —Ü–µ–ª–∏?")) { goals[index].img = null; saveGoals(); } }
        function saveGoals() { try { localStorage.setItem('userGoals', JSON.stringify(goals)); renderGoals(); } catch (e) { alert("–ü–∞–º—è—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞!"); } }
        document.getElementById('vision-file-input').addEventListener('change', function(e) {
            const file = e.target.files[0]; if(!file) return;
            const reader = new FileReader();
            reader.onload = function(event) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas'); const ctx = canvas.getContext('2d');
                    const MAX_WIDTH = 600; const scaleSize = MAX_WIDTH / img.width;
                    canvas.width = MAX_WIDTH; canvas.height = img.height * scaleSize;
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    goals[activeGoalIndex].img = canvas.toDataURL('image/jpeg', 0.7);
                    saveGoals(); tg.HapticFeedback.notificationOccurred('success');
                }
                img.src = event.target.result;
            }
            reader.readAsDataURL(file);
        });
        renderGoals();

        // GENERAL
        const user = tg.initDataUnsafe.user;
        if (user) {
            const fullName = user.first_name + (user.last_name ? " " + user.last_name : "");
            document.getElementById('username').innerText = user.first_name;
            document.getElementById('profile-name').innerText = fullName;
            if (user.photo_url) { document.getElementById('home-avatar').src = user.photo_url; document.getElementById('profile-avatar').src = user.photo_url; }
        }
        const totalItems = 10; let completedItems = JSON.parse(localStorage.getItem('completedItems')) || [];
        function updateProgressUI() {
            const percent = Math.round((completedItems.length / totalItems) * 100);
            document.getElementById('progress-percent').innerText = percent + '%';
            document.getElementById('progress-bar').style.width = percent + '%';
            let status = "–ù–æ–≤–∏—á–æ–∫"; if(percent > 30) status = "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π"; if(percent > 70) status = "–ú–∞—à–∏–Ω–∞"; if(percent === 100) status = "–õ–µ–≥–µ–Ω–¥–∞";
            document.getElementById('level-title').innerText = "–£—Ä–æ–≤–µ–Ω—å: " + status;
            completedItems.forEach(id => { const el = document.getElementById('item-' + id); if(el) el.classList.add('done'); });
        }
        function trackProgress(id) { if (!completedItems.includes(id)) { completedItems.push(id); localStorage.setItem('completedItems', JSON.stringify(completedItems)); updateProgressUI(); tg.HapticFeedback.notificationOccurred('success'); } }
        function resetProgress() { if(confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å, —Ü–µ–ª–∏ –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ?')) { completedItems = []; localStorage.removeItem('completedItems'); localStorage.removeItem('battleTasks'); localStorage.removeItem('userGoals'); localStorage.removeItem('onboardingComplete'); localStorage.removeItem('timeWidgetHidden'); location.reload(); } }
        updateProgressUI();

        function playContent(id, element, videoId) { trackProgress(id); var iframe = document.createElement('iframe'); iframe.src = 'https://www.youtube.com/embed/' + videoId + '?autoplay=1&modestbranding=1&rel=0&showinfo=0&controls=1'; iframe.setAttribute('allowfullscreen', ''); iframe.setAttribute('allow', 'autoplay; encrypted-media'); element.innerHTML = ''; element.appendChild(iframe); }
        function switchTab(tabId, title, element) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active'); if(element) element.classList.add('active');
            const header = document.getElementById('main-header');
            if (tabId === 'tab-home') header.classList.remove('visible'); else { header.classList.add('visible'); document.getElementById('header-title').innerText = title; }
            tg.HapticFeedback.impactOccurred('light'); window.scrollTo({top: 0, behavior: 'smooth'});
        }
        
        // MODAL LOGIC FIX
        function openModal() { document.getElementById('about-modal').classList.add('open'); }
        function closeModal() { document.getElementById('about-modal').classList.remove('open'); }
    </script>
</body>
</html>
